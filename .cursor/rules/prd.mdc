---
alwaysApply: true
---

# MVP PRD — 일본 조미료 얼굴 테스트 (Seasoning Face Test)

- **문서 버전**: v0.9 (MVP 초안)
- **작성일**: 2025-09-25
- **오너**: PM/개발 리드 (You)
- **연관 문서**: 모델 라벨 정의, i18n 시트, 일러스트 가이드

---

## 1) 개요 (Overview)

**엘리베이터 피치**: 사용자가 자신의 얼굴 사진을 업로드하면 브라우저에서 바로 Teachable Machine 모델로 추론하여 "나는 어떤 일본 조미료 얼굴인가?"를 \*\*비율(%)\*\*로 보여주고, 결과 카드를 한 번에 **SNS로 공유**할 수 있는 가벼운 테스트 사이트.

**MVP 원칙**

- 로그인/회원가입 **없음**
- 서버 DB **없음** (정적 JSON 구성 & 클라이언트 추론)
- 개인정보 **서버 미저장**(이미지 업로드는 클라이언트 메모리 한정)
- 공유 중심(OG 메타/썸네일 최적화)
- 다국어 **JA/KO/EN** 우선 지원

**비즈니스 목표**

1. **운영비 최소화** (서버리스/정적 호스팅)
2. **광고 수익**(AdSense) 확보
3. **바이럴 확산**(결과 공유 전환율 ↑)

---

## 2) 범위 (Scope)

**In-Scope (MVP)**

- 사진 업로드(촬영/파일) → 클라이언트 추론(Teachable Machine) → 상위 3개 조미료 비율 결과
- 결과 카드 UI + 공유 버튼(OG 메타)
- 일러스트(조미료 타입별) 표시
- 다국어(일/한/영) 및 언어 스위처
- GA4 이벤트 트래킹, AdSense 배치
- 약관/개인정보 처리방침/쿠키 배너

**Out-of-Scope (MVP에서 하지 않음)**

- 로그인/히스토리/랭킹/댓글
- 서버 저장(원본 이미지/결과 로그)
- 연예인 사진 사용(라이선스 문제로 MVP 제외, 텍스트 언급만 가능)
- 정식 CMS/DB
- 서버 사이드 모델 추론

---

## 3) 타깃 사용자 & 페르소나

- **SNS 액티브 유저**: 재미/밈 콘텐츠를 즐기고 즉시 공유하는 10\~30대
- **라이트 방문자**: 설치/가입 없이 1분 내 체험 원하는 사용자
- **다국적 유저**: 일본/한국/영어권 중심, 향후 다언어 확장 전제

---

## 4) 핵심 사용자 스토리 (User Stories)

1. **U1**: 나는 사진을 올려서 내 얼굴이 어떤 조미료에 가까운지 비율로 보고 싶다.
2. **U2**: 결과를 예쁜 카드로 저장/공유해서 친구 반응을 얻고 싶다.
3. **U3**: 내 언어로 결과와 설명을 보고 싶다.
4. **U4**: 개인정보가 저장되지 않는다는 걸 명확히 알고 싶다.

**수용 기준 (예시)**

- U1: 업로드 후 3초 이내에 결과(Top3 %)가 표시된다(4G 기준).
- U2: X/TikTok/Instagram/LINE/Kakao 공유 시 미리보기(OG)가 의도대로 노출된다.
- U3: 브라우저 언어 인식 + 스위처로 JA/KO/EN 전환 가능, 즉시 반영.
- U4: 프라이버시 페이지에 서버 미저장 정책이 명시되어 있다.

---

## 5) 사용자 흐름 (Flow)

```mermaid
flowchart TD
    A[랜딩] --> B[사진 촬영/업로드]
    B --> C[브라우저 추론(TM)]
    C --> D[결과 화면(Top3 %, 일러스트)]
    D --> E[공유 버튼 클릭]
    E --> F[OG 미리보기/앱 공유]
    D --> G[다시 시도/언어 변경]
```

---

## 6) 기능 요구사항 (Functional Requirements)

### 6.1 업로드

- 지원: 카메라 촬영(mediaDevices), 파일 업로드(input type=file)
- 포맷: JPG/PNG/HEIC(가능하면 변환) / 최대 5MB / 가로 640px 이상 권장
- 전처리: EXIF 회전 보정, 얼굴 영역 자동 크롭(선택), 리사이즈(성능 최적화)
- 오류: 얼굴 미검출/다중 얼굴 → 재시도 안내

### 6.2 모델 추론 (클라이언트)

- 엔진: Teachable Machine(Image) → TF.js 로컬 로딩
- 출력: 조미료 레이블별 확률 배열 → 상위 3개 및 Top1 표시
- 스코어링: Softmax 확률 %, 소수점 0\~1자리 반올림
- 안전장치: Top1 확률 < 0.33이면 "복합 타입" 메시지/가이던스 노출
- 모델 버전: `model_versions.json`로 버전 문자열 표기(푸터)

### 6.3 결과 화면

- 요소: Top1 네임/컬러/짧은 설명 + Top3 Progress Bar + 조미료 일러스트
- 액션: "공유하기", "다시하기", "언어 바꾸기"
- 텍스트: i18n 키 기반 렌더링
- (선택) 연예인 텍스트 예시: 라이선스 미보유 시 **텍스트명만** 노출(이미지 X)

### 6.4 공유(바이럴)

- 채널: X(Twitter) / Instagram(스토리 저장용 카드) / LINE / Kakao / WhatsApp / 복사
- OG 메타: `?t=soy_sauce` 등 쿼리로 타입 식별 → 정적 OG 이미지(타입별)
- 카드 규격: 1200×630 (PNG/WebP), 1MB 이하, 타입 컬러/아이콘 포함
- 공유 문구: 지역/언어별 i18n(예: "나는 간장 60%! 너는?")

### 6.5 다국어 (i18n)

- 기본: JA/KO/EN. 브라우저 언어 자동 선택 + 스위처 제공
- 구조: `/i18n/{ja,ko,en}.json` 키-값 관리
- 날짜/숫자 포맷: Intl API 사용(필요시)

### 6.6 분석/광고

- GA4: 페이지뷰/업로드/결과/공유 이벤트 트래킹
- AdSense: 랜딩 상단 1, 결과 하단 1 (레이지 로딩)
- 주의: CLS/UX 저해 방지, 정책 위반 금지

### 6.7 법무/개인정보/보안

- 이미지/결과 **서버 비저장**, 세션 종료 시 브라우저 메모리 정리
- 약관/프라이버시/쿠키 배너 제공 (GDPR/CCPA/APPI 원칙 반영)
- CSP/Referrer-Policy/SameSite 쿠키(필요 시) 설정

### 6.8 접근성/품질

- 키보드 내비게이션, 대체텍스트, 명도 대비 준수
- 실패/로딩 상태에 대한 명확한 피드백

---

## 7) 비기능 요구사항 (NFR)

- 성능: 4G 환경 LCP < 2.0s(랜딩), 추론 준비 < 1.5s, 결과 표시 < 3s(중간 디바이스)
- 번들: 초기 JS < 300KB gz(모델 파일 캐시 별도)
- 가용성: Vercel 기본 SLA 수준(모니터링 불필요, MVP)
- 비용: 월 \$0\~\$10 내(도메인 제외), 트래픽 증가 시 광고로 상쇄
- SEO: 공개 랜딩만 색인, 업로드/결과는 캐노니컬 처리

---

## 8) 아키텍처 & 기술 스택

- **FE**: Next.js + React, TailwindCSS, shadcn/ui
- **ML**: Teachable Machine → TF.js(브라우저)
- **호스팅**: Vercel(정적/서버리스)
- **데이터**: 정적 JSON(`/data/*.json`) 로 저장, CMS/DB 없음
- **(선택)** 서버리스 함수: 동적 OG 이미지 생성(차후), 건강검진 핑(Ping) 불요

```text
/public/models/teachable/...  # TM 내보낸 모델 파일들
/public/assets/seasoning-illustrations/...  # 타입별 일러스트
/data/seasonings.json        # 타입 정의/컬러/설명 키
/data/celeb_map.json         # 타입→연예인 텍스트 매핑(이미지X)
/i18n/ja.json /ko.json /en.json
/app/(routes)/
/components/(Upload, ResultCard, ShareButtons, LangSwitcher, AdSlot)
```

---

## 9) 데이터 구조 (정적 JSON)

### 9.1 `seasonings.json`

```json
[
  {
    "code": "soy_sauce",
    "name": { "ja": "醤油", "ko": "간장", "en": "Soy Sauce" },
    "color": "#2E2B28",
    "desc_key": "desc.soy_sauce"
  },
  {
    "code": "miso",
    "name": { "ja": "味噌", "ko": "미소", "en": "Miso" },
    "color": "#C28F43",
    "desc_key": "desc.miso"
  },
  {
    "code": "wasabi",
    "name": { "ja": "わさび", "ko": "와사비", "en": "Wasabi" },
    "color": "#89C37C",
    "desc_key": "desc.wasabi"
  }
]
```

### 9.2 `celeb_map.json` (MVP: 텍스트만)

```json
{
  "soy_sauce": [
    { "name": "예시 연예인A", "note": "텍스트만 표기", "license": "none" }
  ],
  "miso": [
    { "name": "예시 연예인B", "note": "텍스트만 표기", "license": "none" }
  ],
  "wasabi": [
    { "name": "예시 연예인C", "note": "텍스트만 표기", "license": "none" }
  ]
}
```

### 9.3 `model_versions.json`

```json
{ "current": "tm-v1.0.0", "changelog": ["초기 학습 모델 배포"] }
```

---

## 10) i18n 키 초안

```json
{
  "title": "일본 조미료 얼굴 테스트",
  "cta.upload": "사진 올리기",
  "cta.retake": "다시하기",
  "cta.share": "공유하기",
  "result.top": "나의 최상위 조미료",
  "result.mix": "나의 조미료 믹스",
  "share.text": "나는 {{top}} {{pct}}%! 너는?",
  "privacy.notice": "이미지는 서버에 저장되지 않아요.",
  "desc.soy_sauce": "부드럽고 조화로운 밸런스의 간장 타입…",
  "desc.miso": "따뜻하고 깊은 풍미의 미소 타입…",
  "desc.wasabi": "상큼하고 임팩트 강한 와사비 타입…"
}
```

---

## 11) 트래킹 플랜 (GA4)

- **page_view**: {page: "landing|result"}
- **upload_start/upload_success/upload_error**
- **inference_start/inference_done**: {model_version, ms}
- **share_click**: {channel: "x|ig|line|kakao|copy" , top_label}
- **lang_change**: {from, to}

KPI: 업로드→결과 전환율, 결과→공유 전환율, 평균 체류, 언어/국가별 트래픽, Ad RPM

---

## 12) 광고 배치 가이드 (MVP)

- 랜딩 상단 1 슬롯(접근성/CLS 고려한 자리 예약 박스)
- 결과 하단 1 슬롯(결과 카드 하단 마진 24px)
- Lazy-load, 광고 차단 환경 대비 폴백 레이아웃 유지

---

## 13) 성능/품질 가이드

- 이미지: WebP 우선, 일러스트 `~100KB` 이하, OG는 `~300KB` 이하
- 코드 분할: 모델 로더/추론 컴포넌트 지연 로딩
- 캐싱: 모델 파일 `Cache-Control: immutable` (버전 쿼리)
- 접근성: aria-label, focus trap, 대비 4.5:1 이상

---

## 14) 법무/정책 체크리스트

- [ ] 업로드 이미지는 **네트워크 전송 금지** (FileReader/Canvas 로컬 처리)
- [ ] 공유 썸네일에 **사용자 얼굴 미포함**
- [ ] 연예인 이미지는 **MVP 미사용**(텍스트만) — 라이선스 확보 전까지 금지
- [ ] 개인정보처리방침/이용약관/쿠키 배너 게시

---

## 15) 릴리즈 플랜

- **M0 (2주)**: 무-DB/무-Auth MVP

  - 라벨/모델 확정, 일러스트·i18n·OG, GA4/AdSense, 정책 페이지

- **M1**: 서버리스 보강(선택)

  - 동적 OG 이미지 생성, 간단 KV 플래그/레이트리밋(클라 로컬백업)

- **M2**: 확장(추후)

  - 정식 DB(익명 로그/히스토리/랭킹), 번역 CMS, 유료화 옵션

---

## 16) 리스크 & 대응

- **저작권**: 연예인 이미지 사용 금지(사전 라이선스 필수) → 일러스트/텍스트 대체
- **성능**: 저사양 기기 추론 지연 → 이미지 리사이즈/모델 경량화/로딩 UX
- **바이럴 실패**: OG 카드 품질/카피 개선, A/B 문구 테스트(후속 단계)
- **오인식**: 낮은 확률 시 복합 타입 메시지, 재시도 유도

---

## 17) QA 체크리스트 (발행 전)

- [ ] 업로드/촬영 iOS/Android/데스크탑 교차 테스트
- [ ] EXIF 회전/세로셀피 처리 OK
- [ ] 얼굴 미검출/다중 얼굴 에러 UX 확인
- [ ] JA/KO/EN 전환 즉시 반영
- [ ] OG 미리보기 채널별 확인(X, Kakao, LINE 등)
- [ ] GA4 이벤트 유입 실측
- [ ] CLS/LCP 성능 점검
- [ ] 프라이버시/약관 노출 확인

---

## 18) 오픈 이슈 (Open Questions)

- TM 모델 라벨 최종본/데이터 밸런스 기준은? (라벨 수, 클래스 편향)
- 연예인 텍스트 예시의 법적 문제(초상권/표기 가이드) 검토 필요
- Kakao/LINE 공유 API 최신 스펙 및 OG 캐시 무효화 전략
- HEIC 처리(변환/폴백) 채택 여부
